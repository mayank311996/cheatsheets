## Run

```bash
conda create -n scikit-dev python=3.6
conda activate scikit-dev
conda install scikit-learn=0.20.2 jupyter pandas pylint rope
conda list 
```

```bash
sls create --template aws-python3 --name california-housing
```

Installing on plugin

```bash
sls plugin install -n serverless-python-requirements@4.2.4 
```

- When you have backend and frontend on different domains 
you need to specify "Access-Control-Allow-Origin": "*" in 
handler.py. For now this means we allow any domain to query our 
backend but in production you should specify only one domain that can 
query your backend.

To test function locally with serverless 

```bash
sls invoke local --function predict-price --path event.json
```

- You can also use unit test to test your function. Explore more!
- requirements.txt is needed because we are using dockerizePip: true in 
custom section in serverless.yml file. This dockerizePip option 
helps to install dependencies as a docker container. This is very compatible
with AWS Linux machines used by AWS Lambda.
- slim: true option in serverless.yml file under custom section helps to 
reduce size of .so file generated by python dependencies installation.

```bash
sudo sls deploy
sls invoke --function predict-price --path event.json
```

- For production purpose it is recommended to use min 512MB of memory 
for Lambda function.
- One get through to avoid cold start is to ping Lambda using CloudWatch
at regular interval to always have warm start. 
    1. go to cloud watch and create new rule. 
    2. go to schedule and set fixed rate of 15 mins (for eg.).
    3. Go to target and select Lambda function and specify the 
    function we are using.
    4. Leave other options as default and matched event. 
    5. Click on configure details.
    6. Name - eg. ping-predict-price.
    7. State - tick yes for enabled.
    8. Click on create rule. 
- You can disable the CloudWatch event before deploying the function
and enable after deployment is done. Good practice. Check!
- Also, your endpoint url will not change doesn't matter how many times 
you redeploy function using sls as long as you don't change or remove 
the whole stack using `sls remove` command. Works as long as function
size is less than 70MB. Check!

Redeploy the function as we changed the handler.py file by adding 
if else rule for invocation.

```bash
sudo sls deploy --function predict-price
```
